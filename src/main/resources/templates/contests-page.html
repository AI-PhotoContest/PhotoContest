<!doctype html>
<html>
<link href="../static/css/parallax.css" rel="stylesheet" type="text/css" th:href="@{/css/parallax.css}"/>
<head th:replace="~{fragments/head.html :: main-head}">
    <title>contests</title>
</head>

<body style="padding-top: 140px;">
<div id="wrap">
    <header id="header">
        <div id="searchBarAndLogo" th:replace="~{fragments/SearchBarAndLogo.html :: searchBarAndLogo}"></div>
        <nav th:replace="~{fragments/Navbar.html :: navBarMenu ('contests')}"></nav>
    </header>
</div>

<div class="clear"></div>

<div class="container" style="position: absolute">
    <div class="row">
        <div class="col-md-12">
            <h1 class="text-center">Contests</h1>
        </div>
    </div>

    <!-- Филтри за търсене -->
    <div class="filter-bar">
        <form method="get" th:action="@{/contests}">
            <div class="filter-group">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" th:value="${param.title}">
            </div>

            <div class="filter-group">
                <label for="category">Category:</label>
                <select id="category" name="category">
                    <option value="" th:selected="${param.category == null}">All</option>
                    <option value="Art" th:selected="${param.category == 'Art'}">Art</option>
                    <option value="Science" th:selected="${param.category == 'Science'}">Science</option>
                    <option value="Sports" th:selected="${param.category == 'Sports'}">Sports</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="type">Type:</label>
                <select id="type" name="type">
                    <option value="" th:selected="${param.type == null}">All</option>
                    <option value="Online" th:selected="${param.type == 'Online'}">Online</option>
                    <option value="Offline" th:selected="${param.type == 'Offline'}">Offline</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="phase">Phase:</label>
                <select id="phase" name="phase">
                    <option value="" th:selected="${param.phase == null}">All</option>
                    <option value="Registration" th:selected="${param.phase == 'Registration'}">Registration</option>
                    <option value="Active" th:selected="${param.phase == 'Active'}">Active</option>
                    <option value="Completed" th:selected="${param.phase == 'Completed'}">Completed</option>
                </select>
            </div>

            <div class="filter-group">
                <button type="submit">Filter</button>
            </div>
        </form>
    </div>

    <div class="content">
        <main class="gallery">
            <div class="gallery-track">
                <!-- Thymeleaf цикъл за зареждане на изображенията -->
                <div class="card" th:each="contest : ${contests}">
                    <div class="card-image-wrapper">
                        <!-- Линк, който води към /contest/{id} -->
                        <a th:href="@{/contests/{id}(id=${contest.id})}">
                            <img th:src="'/images/contest-images/' + ${contest.getPhotoUrl()}" alt="Gallery image">
                            <div class="overlay-background"></div>
                            <div class="overlay-text animated-text">
                                <!-- Разделяне на буквите в span елементи за анимация -->
                                <span th:each="letter, iterStat : ${#strings.arraySplit(contest.title, '')}"
                                      th:text="${letter}"
                                      th:attr="style='animation-delay:' + (${iterStat.index} * 0.1) + 's'"></span>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

</body>
<script>
    // JavaScript за галерията (без промени)
</script>
</html>